<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="alternate" href="/rss.xml" title="sakura" s="" blog""="" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="sakura" s="" blog""="" type="application/atom+xml"><link rel="alternate" type="application/json" title="sakura&quot;s blog&quot;" href="https://sakurame.eu.org/feed.json"><link rel="preconnect" href="https://s4.zstatic.net"><link rel="preconnect" href="https://at.alicdn.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CFredericka%20the%20Great:400,400italic,700,700italic%7CNoto%20Serif%20JP:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CInconsolata:400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext" media="none" onload="this.media='all'"><link rel="modulepreload" href="/js/siteInit.js"><link rel="modulepreload" href="/js/nyx-player-FL6IVJ7K.js"><link rel="modulepreload" href="/js/copy-tex-J4RXVQFU.js"><link rel="modulepreload" href="/js/post-BYOOLMPE.js"><link rel="modulepreload" href="/js/chunk-HOQ6CD2A.js"><link rel="modulepreload" href="/js/tcomments-MXX364JD.js"><link rel="modulepreload" href="/js/chunk-UAU5CDGP.js"><link rel="modulepreload" href="/js/index.esm-D6VTWJFS.js"><link rel="modulepreload" href="/js/chunk-LDEIN6IO.js"><link rel="modulepreload" href="/js/chunk-C2255TGX.js"><link rel="modulepreload" href="/js/cf-patch.js"><link rel="stylesheet" href="/css/siteInit.css" media="none" onload="this.media='all'"><script src="/js/cf-patch.js?v=0.5.4" type="module" fetchpriority="high" defer=""></script><link rel="preload" href="https://ptpimg.me/gzt9vt.jpg" as="image" fetchpriority="high"><link rel="preload" href="https://ptpimg.me/q8lgy3.jpg" as="image" fetchpriority="high"><link rel="preload" href="https://ptpimg.me/9x13r6.jpg" as="image" fetchpriority="high"><link rel="preload" href="https://ptpimg.me/r129au.jpg" as="image" fetchpriority="high"><link rel="preload" href="https://ptpimg.me/1736wk.jpg" as="image" fetchpriority="high"><link rel="preload" href="https://ptpimg.me/5422e1.jpg" as="image" fetchpriority="high"><meta name="keywords" content="隐私"><meta name="description" content="The spirit of independence and the freedom of thought "><link rel="canonical" href="https://sakurame.eu.org/2023/06/09/privacy/the-pgp-problem/"><link rel="stylesheet" href="/css/post.css?v=0.5.4"><link rel="stylesheet" href="/css/mermaid.css?v=0.5.4"><!-- 临时处理--><link rel="stylesheet" media="none" onload="this.media='all'" href="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.css"><title>the-pgp-problem</title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="pagefind_mount"></div><div id="container"><header id="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">the-pgp-problem</h1><div class="meta"><span class="item" title="Created: 2023-06-09 15:37:50"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">Posted on</span><time itemprop="dateCreated datePublished" datetime="2023-06-09T15:37:50+08:00">2023-06-09</time></span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i></span><span class="text">Symbols count in article</span><span>20k</span><span class="text">words</span></span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i></span><span class="text">Reading time</span><span>18 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Sakura's Blog</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><ul><li class="item" style="background-image: url(&quot;https://ptpimg.me/gzt9vt.jpg&quot;);"></li><li class="item" style="background-image: url(&quot;https://ptpimg.me/q8lgy3.jpg&quot;);"></li><li class="item" style="background-image: url(&quot;https://ptpimg.me/9x13r6.jpg&quot;);"></li><li class="item" style="background-image: url(&quot;https://ptpimg.me/r129au.jpg&quot;);"></li><li class="item" style="background-image: url(&quot;https://ptpimg.me/1736wk.jpg&quot;);"></li><li class="item" style="background-image: url(&quot;https://ptpimg.me/5422e1.jpg&quot;);"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement="" itemscope="" itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">Home</a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/privacy/" itemprop="item" rel="index" title="In隐私保护指北"><span itemprop="name">隐私保护指北<meta itemprop="position" content="0"></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" data-pagefind-body="data-pagefind-body" lang="zh-cn"><link itemprop="mainEntityOfPage" href="https://sakurame.eu.org/2023/06/09/privacy/the-pgp-problem/"><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"><meta itemprop="name" content="AUVeggry"><meta itemprop="description" content=", The spirit of independence and the freedom of thought "></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="sakura&quot;s blog&quot;"></span><div class="body md" itemprop="articleBody"><p><a target="_blank" rel="noopener" href="https://latacora.micro.blog/">Latacora</a></p>
<p>​		 		 			<a target="_blank" rel="noopener" href="https://latacora.micro.blog/about/">About</a> 		 	 		 			<a target="_blank" rel="noopener" href="https://latacora.micro.blog/archive/">Archive</a></p>
<h1 id="the-pgp-problem"><a class="anchor" href="#the-pgp-problem">#</a> The PGP Problem</h1>
<p>Jul 16, 2019</p>
<p><a target="_blank" rel="noopener" href="https://blog.cryptographyengineering.com/2014/08/13/whats-matter-with-pgp/">Cryptography engineers have been tearing their hair out over PGP’s deficiencies</a> for (literally) decades. When other kinds of engineers get wind of  this, they’re shocked. PGP is bad? Why do people keep telling me to use  PGP? The answer is that they shouldn’t be telling you that, because PGP  is bad and needs to go away.</p>
<p>There are, as you’re about to see, lots of problems with PGP.  Fortunately, if you’re not morbidly curious, there’s a simple  meta-problem with it: it was designed in the 1990s, before serious  modern cryptography. No competent crypto engineer would design a system  that looked like PGP today, nor tolerate most of its defects in any  other design. Serious cryptographers have largely given up on PGP and  don’t spend much time publishing on it anymore (<a target="_blank" rel="noopener" href="https://www.usenix.org/system/files/conference/usenixsecurity18/sec18-poddebniak.pdf">with a notable exception</a>). Well-understood problems in PGP have gone unaddressed for over a decade because of this.</p>
<p>Two quick notes: first, we wrote this for engineers, not lawyers and  activists. Second: “PGP” can mean a bunch of things, from the <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc4880">OpenPGP standard</a> to its reference implementation in GnuPG. We use the term “PGP” to cover all of these things.</p>
<h2 id="the-problems"><a class="anchor" href="#the-problems">#</a> The Problems</h2>
<h3 id="absurd-complexity"><a class="anchor" href="#absurd-complexity">#</a> Absurd Complexity</h3>
<p>For reasons none of us here in the future understand, PGP has a  packet-based structure. A PGP message (in a “.asc” file) is an archive  of typed packets. There are <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc4880#page-13">at least 8 different ways</a> of encoding the length of a packet, depending on whether you’re using  “new” or “old” format packets. The “new format” packets have  variable-length lengths, like BER (try to write a PGP implementation and you may wish for the sweet release of ASN.1). Packets can have  subpackets. There are overlapping variants of some packets. The most  recent keyserver attack happened because GnuPG <a target="_blank" rel="noopener" href="https://threadreaderapp.com/thread/1147162583969009664.html">accidentally went quadratic</a> in parsing keys, which also follow this deranged format.</p>
<p>That’s just the encoding. The actual system doesn’t get simpler.  There are keys and subkeys. Key IDs and key servers and key signatures.  Sign-only and encrypt-only. Multiple “key rings”. Revocation  certificates. Three different compression formats. This is all before we get to smartcard support.</p>
<h3 id="swiss-army-knife-design"><a class="anchor" href="#swiss-army-knife-design">#</a> Swiss Army Knife Design</h3>
<p>If you’re stranded in the woods and, I don’t know, need to repair  your jean cuffs, it’s handy if your utility knife has a pair of  scissors. But nobody who does serious work uses their multitool scissors regularly.</p>
<p>A Swiss Army knife does a bunch of things, all of them poorly. PGP  does a mediocre job of signing things, a relatively poor job of  encrypting them with passwords, and a pretty bad job of encrypting them  with public keys. PGP is not an especially good way to securely transfer a file. It’s a clunky way to sign packages. It’s not great at  protecting backups. It’s a downright dangerous way to converse in secure messages.</p>
<p>Back in the MC Hammer era from which PGP originates, “encryption” was its own special thing; there was one tool to send a file, or to back up a directory, and another tool to encrypt and sign a file. Modern  cryptography doesn’t work like this; it’s purpose built. Secure  messaging wants crypto that is different from secure backups or package  signing.</p>
<h3 id="mired-in-backwards-compatibility"><a class="anchor" href="#mired-in-backwards-compatibility">#</a> Mired In Backwards Compatibility</h3>
<p>PGP predates modern cryptography; there are Hanson albums that have  aged better. If you’re lucky, your local GnuPG defaults to 2048-bit RSA, the 64-bit-block CAST5 cipher in CFB, and the OpenPGP MDC checksum  (about which more later). If you encrypt with a password rather than  with a public key, the OpenPGP protocol specifies PGP’s S2K password  KDF. These are, to put it gently, not the primitives a cryptography  engineer would select for a modern system.</p>
<p>We’ve learned a lot since Steve  Urkel graced the airwaves during  ABC’s TGIF: that you should authenticate your ciphertexts (and avoid CFB mode) would be an obvious example, but also that 64-bit block ciphers  are bad, that we can do much better than RSA, that mixing compression  and encryption is dangerous, and that KDFs should be both time- and  memory-hard.</p>
<p>Whatever the OpenPGP RFCs may say, you’re probably not doing any of  these things if you’re using PGP, nor can you predict when you will.  Take AEAD ciphers: the Rust-language Sequoia PGP defaulted to the  AES-EAX AEAD mode, which is great, and nobody can read those messages  because most PGP installs don’t know what EAX mode is, which is not  great. Every well-known bad cryptosystem eventually sprouts an RFC  extension that supports curves or AEAD, so that its proponents can claim on message boards that they support modern cryptography. RFC’s don’t  matter: only the installed base does. We’ve understood authenticated  encryption for 2 decades, and PGP is old enough to buy me drinks; enough excuses.</p>
<p>You can have backwards compatibility with the 1990s or you can have sound cryptography; <em>you can’t have both</em>.</p>
<h3 id="obnoxious-ux"><a class="anchor" href="#obnoxious-ux">#</a> Obnoxious UX</h3>
<p>We can’t say this any better than Ted Unangst:</p>
<blockquote>
<p>There was a PGP usability study conducted a few years ago where a  group of technical people were placed in a room with a computer and  asked to set up PGP. Two hours later, they were never seen or heard from again.</p>
</blockquote>
<p>If you’d like empirical data of your own to back this up, here’s an  experiment you can run: find an immigration lawyer and talk them through the process of getting Signal working on their phone. You probably  don’t suddenly smell burning toast. Now try doing that with PGP.</p>
<h3 id="long-term-secrets"><a class="anchor" href="#long-term-secrets">#</a> Long-Term Secrets</h3>
<p>PGP begs users to keep a practically-forever root key tied to their  identity. It does this by making keys annoying to generate and exchange, by encouraging “key signing parties”, and by creating a “web of trust”  where keys depend on other keys.</p>
<p><a target="_blank" rel="noopener" href="https://blog.filippo.io/giving-up-on-long-term-pgp/">Long term keys are almost never what you want</a>. If you keep using a key, it eventually gets exposed. You want the blast radius of a compromise to be as small as possible, and, just as  importantly, you don’t want users to hesitate even for a moment at the  thought of rolling a new key if there’s any concern at all about the  safety of their current key.</p>
<p>The PGP cheering section will immediately reply “that’s why you keep  keys on a Yubikey”. To a decent first approximation, nobody in the whole world uses the expensive Yubikeys that do this, and you can’t imagine a future in which that changes (we can barely get U2F rolled out, and  those keys are disposable). We can’t accept bad cryptosystems just to  make Unix nerds feel better about their toys.</p>
<h3 id="broken-authentication"><a class="anchor" href="#broken-authentication">#</a> Broken Authentication</h3>
<p>More on PGP’s archaic primitives: way back in 2000, the OpenPGP  working group realized they needed to authenticate ciphertext, and that  PGP’s signatures weren’t accomplishing that. So OpenPGP invented <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc4880#section-5.14">the MDC system</a>: PGP messages with MDCs attach a SHA-1 of the plaintext to the plaintext, which is then encrypted (as normal) in CFB mode.</p>
<p>If you’re wondering how PGP gets away with this when modern systems  use relatively complex AEAD modes (why can’t everyone just tack a SHA-1  to their plaintext), you’re not alone. Where to start with this Rube  Goldberg contraption? The PGP MDC can be stripped off messages –– it was encoded in such a way that you can simply chop off the last 22 bytes of the ciphertext to do that. To retain backwards compatibility with  insecure older messages, PGP introduced a new packet type to signal that the MDC needs to be validated; if you use the wrong type, the MDC  doesn’t get checked. Even if you do, the new SEIP packet format is close enough to the insecure SE format that you can potentially trick readers into downgrading; <a target="_blank" rel="noopener" href="https://mailarchive.ietf.org/arch/msg/openpgp/tB00vO5r-qneX9wz1xz3netpXVU">Trevor Perrin worked the SEIP out to 16 whole bits of security.</a></p>
<p>And, finally, even if everything goes right, the reference PGP  implementation will (wait for it) release unauthenticated plaintext to  callers, <em>even if the MDC doesn’t match</em>.</p>
<h3 id="incoherent-identity"><a class="anchor" href="#incoherent-identity">#</a> Incoherent Identity</h3>
<p>PGP is an application. It’s a set of integrations with other  applications. It’s a file format. It’s also a social network, and a  subculture.</p>
<p>PGP pushes notion of a cryptographic identity. You generate a key,  save it in your keyring, print its fingerprint on your business card,  and publish it to a keyserver. You sign other people’s keys. They in  turn may or may not rely on your signatures to verify other keys. Some  people go out of their way to meet other PGP users in person to exchange keys and more securely attach themselves to this “web of trust”. Other  people organize “key signing parties”. The image you’re conjuring in  your head of that accurately explains how hard it is to PGP’s devotees  to switch to newer stuff.</p>
<p>None of this identity goop works. Not the key signing web of trust,  not the keyservers, not the parties. Ordinary people will trust anything that looks like a PGP key no matter where it came from – how could they not, when even an expert would have a hard time articulating how to  evaluate a key? Experts don’t trust keys they haven’t exchanged  personally. Everyone else relies on centralized authorities to  distribute keys. PGP’s key distribution mechanisms are theater.</p>
<h3 id="leaks-metadata"><a class="anchor" href="#leaks-metadata">#</a> Leaks Metadata</h3>
<p>Forget the email debacle for a second (we’ll get to that later). PGP  by itself leaks metadata. Messages are (in normal usage) linked directly to key identifiers, which are, throughout PGP’s cobweb of trust, linked to user identity. Further, a rather large fraction of PGP users make  use of keyservers, which can themselves leak to the network the  identities of which PGP users are communicating with each other.</p>
<h3 id="no-forward-secrecy"><a class="anchor" href="#no-forward-secrecy">#</a> No Forward Secrecy</h3>
<p>A good example of that last problem: secure messaging crypto demands  forward secrecy. Forward secrecy means that if you lose your key to an  attacker today, they still can’t go back and read yesterday’s messages;  they had to be there with the key yesterday to read them. In modern  cryptography engineering, we assume our adversary is recording  everything, into infinite storage. PGP’s claimed adversaries include  world governments, many of whom are certainly doing exactly that.  Against serious adversaries and without forward secrecy, breaches are a  question of “when”, not “if”.</p>
<p>To get forward secrecy in practice, you typically keep two secret  keys: a short term session key and a longer-term trusted key. The  session key is ephemeral (usually the product of a DH exchange) and the  trusted key signs it, so that a man-in-the-middle can’t swap their own  key in. It’s theoretically possible to achieve a facsimile of forward  secrecy using the tools PGP provides. Of course, pretty much nobody does this.</p>
<h3 id="clumsy-keys"><a class="anchor" href="#clumsy-keys">#</a> Clumsy Keys</h3>
<p>An OpenBSD signify(1) public key is a Base64 string short enough to  fit in the middle of a sentence in an email; the private key, which  isn’t an interchange format, is just a line or so longer. A PGP public  key is a whole giant Base64 document; if you’ve used them often, you’re  probably already in the habit of attaching them rather than pasting them into messages so they don’t get corrupted. Signify’s key is a  state-of-the-art Ed25519 key; PGP’s is a weaker RSA key.</p>
<p>You might think this stuff doesn’t matter, but it matters a lot;  orders of magnitude more people use SSH and manage SSH keys than use  PGP. SSH keys are trivial to handle; PGP’s are not.</p>
<h3 id="negotiation"><a class="anchor" href="#negotiation">#</a> Negotiation</h3>
<p>PGP supports ElGamal. PGP supports RSA. PGP supports the NIST  P-Curves. PGP supports Brainpool. PGP supports Curve25519. PGP supports  SHA-1. PGP supports SHA-2. PGP supports RIPEMD160. PGP supports IDEA.  PGP supports 3DES. PGP supports CAST5. PGP supports AES. There is no way this is a complete list of what PGP supports.</p>
<p>If we’ve learned 3 important things about cryptography design in the  last 20 years, at least 2 of them are that negotiation and compatibility are evil. The flaws in cryptosystems tend to appear in the joinery, not the lumber, and expansive crypto compatibility increases the amount of  joinery. Modern protocols like TLS 1.3 are jettisoning backwards  compatibility with things like RSA, not adding it. New systems support <em>just a single suite of primitives</em>, and a simple version number. If one of those primitives fails, you bump the version and chuck the old protocol all at once.</p>
<p>If we’re unlucky, and people are still using PGP 20 years from now,  PGP will be the only reason any code anywhere includes CAST5. We can’t  say this more clearly or often enough: you can have backwards  compatibility with the 1990s or you can have sound cryptography; you  can’t have both.</p>
<h3 id="janky-code"><a class="anchor" href="#janky-code">#</a> Janky Code</h3>
<p>The de facto standard implementation of PGP is GnuPG. GnuPG is not  carefully built. It’s a sprawling C-language codebase with duplicative  functionality (write-ups of the most recent SKS key parsing denial of  service noted that it has multiple key parsers, for instance) with a <a target="_blank" rel="noopener" href="https://www.cvedetails.com/vulnerability-list/vendor_id-4711/Gnupg.html">long track record of CVEs</a> ranging from memory corruption to cryptographic side channels. It has  at times been possible to strip authenticators off messages without  GnuPG noticing. It’s been possible to feed it keys that don’t  fingerprint properly without it noticing. The 2018 Efail vulnerability  was a result of it releasing unauthenticated plaintext to callers. GnuPG is not good.</p>
<p>GnuPG is also effectively the reference implementation for PGP, and  also the basis for most other tools that integrate PGP cryptography. It  isn’t going anywhere. To rely on PGP is to rely on GPG.</p>
<h2 id="the-answers"><a class="anchor" href="#the-answers">#</a> The Answers</h2>
<p>One of the rhetorical challenges of persuading people to stop using PGP is that there’s no one thing you can replace it with, <em>nor should there be</em>. What you should use instead depends on what you’re doing.</p>
<h3 id="talking-to-people"><a class="anchor" href="#talking-to-people">#</a> Talking To People</h3>
<p>Use Signal. Or Wire, or WhatsApp, or some other Signal-protocol-based secure messenger.</p>
<p>Modern secure messengers are purpose-built around messaging. They use privacy-preserving authentication handshakes, repudiable messages, <em>cryptographic ratchets</em> that rekey on every message exchange, and, of course, modern encryption primitives. Messengers are trivially easy to use and there’s no fussing over keys and subkeys. If you use Signal, you get even more than that:  you get a system so paranoid about keeping private metadata off servers  that it tunnels Giphy searches to avoid traffic analysis attacks, and  until relatively recently didn’t even support user profiles.</p>
<h3 id="encrypting-email"><a class="anchor" href="#encrypting-email">#</a> Encrypting Email</h3>
<p>Don’t.</p>
<p><a target="_blank" rel="noopener" href="https://news.ycombinator.com/item?id=16088386">Email is insecure</a>. Even with PGP, it’s default-plaintext, which means that even if you do  everything right, some totally reasonable person you mail, doing totally reasonable things, will invariably CC the quoted plaintext of your  encrypted message to someone else (we don’t know a PGP email user who  hasn’t seen this happen). PGP email is forward-insecure. Email metadata, including the subject (which is literally message content), are always  plaintext.</p>
<p>If you needed another reason, <a target="_blank" rel="noopener" href="https://www.usenix.org/system/files/conference/usenixsecurity18/sec18-poddebniak.pdf">read the Efail paper</a>. The GnuPG community, <a target="_blank" rel="noopener" href="https://web.archive.org/web/20181225214730/https://flaked.sockpuppet.org/2018/05/16/a-unified-timeline.html">which mishandled the Efail disclosure</a>, talks this research down a lot, but it was accepted at Usenix Security  (one of the top academic software security venues) and at Black Hat USA (<em>the</em> top industry software security venue), was one of the best  cryptographic attacks of the last 5 years, and is a pretty devastating  indictment of the PGP ecosystem. As you’ll see from the paper, S/MIME  isn’t better.</p>
<p>This isn’t going to get fixed. To make actually-secure email, you’d  have to tunnel another protocol over email (you’d still be conceding  traffic analysis attacks). At that point, why bother pretending?</p>
<p>Encrypting email is asking for a calamity. Recommending email  encryption to at-risk users is malpractice. Anyone who tells you it’s  secure to communicate over PGP-encrypted email is putting their weird  preferences ahead of your safety.</p>
<h3 id="sending-files"><a class="anchor" href="#sending-files">#</a> Sending Files</h3>
<p>Use <a target="_blank" rel="noopener" href="https://github.com/warner/magic-wormhole">Magic Wormhole</a>. Wormhole clients use a one-time password-authenticated key exchange  (PAKE) to encrypt files to recipients. It’s easy (for nerds, at least),  secure, and fun: we haven’t introduced wormhole to anyone who didn’t  start gleefully wormholing things immediately just like we did.</p>
<p>Someone stick a Windows installer on a Go or Rust implementation of  Magic Wormhole right away; it’s too great for everyone not to have.</p>
<p>If you’re working with lawyers and not with technologists, Signal  does a perfectly cromulent job of securing file transfers. Put a Signal  number on your security page to receive bug bounty reports, not a PGP  key.</p>
<h3 id="encrypting-backups"><a class="anchor" href="#encrypting-backups">#</a> Encrypting Backups</h3>
<p>Use Tarsnap. <a target="_blank" rel="noopener" href="https://www.tarsnap.com/design.html">Colin can tell you all about how Tarsnap is optimized to protect backups.</a> Or really, use any other encrypted backup tool that lots of other  people use; they won’t be as good as Tarsnap but they’ll all do a better job than PGP will.</p>
<p>Need offline backups? Use encrypted disk images; they’re built into modern Windows, Linux, and macOS. <a target="_blank" rel="noopener" href="https://sockpuppet.org/blog/2014/04/30/you-dont-want-xts/">Full disk encryption isn’t great</a>, but it works fine for this use case, and it’s easier and safer than PGP.</p>
<h3 id="signing-packages"><a class="anchor" href="#signing-packages">#</a> Signing Packages</h3>
<p>Use Signify/Minisign. <a target="_blank" rel="noopener" href="https://www.openbsd.org/papers/bsdcan-signify.html">Ted Unangst will tell you all about it.</a> It’s what OpenBSD uses to sign packages. It’s extremely simple and uses modern signing. <a target="_blank" rel="noopener" href="https://jedisct1.github.io/minisign/">Minisign</a>, from Frank Denis, the libsodium guy, brings the same design to Windows  and macOS; it has bindings for Go, Rust, Python, Javascript, and .NET;  it’s even compatible with Signify.</p>
<h3 id="encrypting-application-data"><a class="anchor" href="#encrypting-application-data">#</a> Encrypting Application Data</h3>
<p>Use  <a target="_blank" rel="noopener" href="https://github.com/jedisct1/libsodium">libsodium</a> It builds everywhere, has interface that’s designed to be hard to misuse,  and you won’t have to shell out to a binary to use it.</p>
<h3 id="encrypting-files"><a class="anchor" href="#encrypting-files">#</a> Encrypting Files</h3>
<p>This really is a problem. If you’re/not/making a backup, and you’re  /not/archiving something offline for long-term storage, and you’re  /not/encrypting in order to securely send the file to someone else, and  you’re /not/encrypting virtual drives that you mount/unmount as needed  to get work done, then there’s no one good tool that does this now.  Filippo Valsorda is working on “<a target="_blank" rel="noopener" href="https://docs.google.com/document/d/11yHom20CrsuX8KQJXBBw04s80Unjv8zCg_A7sPAX_9Y/view">age</a>” for these use cases, and I’m super optimistic about it, but it’s not there yet.</p>
<p><em>Update, February 2020</em></p>
<p>Filippo’s <a target="_blank" rel="noopener" href="https://age-encryption.org">age</a> has been  released. It’s a solid design with simple, easily auditable  implementations in Go and Rust. You can build binaries for it for every  mainstream platform. Age is, of course, much younger than PGP. But I  would bet all the money in my pocket against all the money in yours that a new vulnerability will be found in the clangorous contraption of PGP  before one is found in age. Look into age!</p>
<p>Hopefully it’s clear that this is a pretty narrow use case. We work  in software security and handle sensitive data, including bug bounty  reports (another super common “we need PGP!” use case), and we almost  never have to touch PGP.</p>
<p>Follow <a target="_blank" rel="noopener" href="https://micro.blog/latacora">@latacora on Micro.blog</a>.</p>
<div class="tags"><a href="/tags/%E9%9A%90%E7%A7%81/" rel="tag"><i class="ic i-tag"></i>隐私</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-eye"></i></span><span class="text">Total Views: </span><span class="waline-pageview-count" id="twikoo_visitors" data-path="/2023/06/09/privacy/the-pgp-problem/">Loading...</span></span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">Edited on </span><time title="Modified: 2024-03-13 00:01:09" itemprop="dateModified" datetime="2024-03-13T00:01:09+08:00">2024-03-13</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>Donate</button><p>Give me a cup of [coffee]~(￣▽￣)~*</p><div id="qr"><div><img loading="lazy" src="/assets/monero.avif" alt="AUVeggry monero"><p>monero</p></div><div><img loading="lazy" src="/assets/bitcoin.avif" alt="AUVeggry Bitcoin"><p>Bitcoin</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>AUVeggry<i class="ic i-at"><em>@</em></i>sakura"s blog"</li><li class="link"><strong>Post link: </strong><a href="https://sakurame.eu.org/2023/06/09/privacy/the-pgp-problem/" title="the-pgp-problem">https://sakurame.eu.org/2023/06/09/privacy/the-pgp-problem/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/06/09/privacy/PGP%E7%9A%84%E9%97%AE%E9%A2%98/" rel="prev" itemprop="url" data-background-image="https://ptpimg.me/e1davo.jpg" title="PGP的问题"><span class="type">Previous Post</span><span class="category"><i class="ic i-flag"></i>隐私保护指北</span><h3>PGP的问题</h3></a></div><div class="item right"><a href="/2023/06/09/vcbstudio/%E7%86%9F%E6%82%89VapourSynth/" rel="next" itemprop="url" data-background-image="https://ptpimg.me/dpco9h.jpg" title="熟悉VapourSynth"><span class="type">Next Post</span><span class="category"><i class="ic i-flag"></i>视频压制技术</span><h3>熟悉VapourSynth</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#the-pgp-problem"><span class="toc-number">1.</span> <span class="toc-text"> The PGP Problem</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#the-problems"><span class="toc-number">1.1.</span> <span class="toc-text"> The Problems</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#absurd-complexity"><span class="toc-number">1.1.1.</span> <span class="toc-text"> Absurd Complexity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#swiss-army-knife-design"><span class="toc-number">1.1.2.</span> <span class="toc-text"> Swiss Army Knife Design</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mired-in-backwards-compatibility"><span class="toc-number">1.1.3.</span> <span class="toc-text"> Mired In Backwards Compatibility</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#obnoxious-ux"><span class="toc-number">1.1.4.</span> <span class="toc-text"> Obnoxious UX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#long-term-secrets"><span class="toc-number">1.1.5.</span> <span class="toc-text"> Long-Term Secrets</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#broken-authentication"><span class="toc-number">1.1.6.</span> <span class="toc-text"> Broken Authentication</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#incoherent-identity"><span class="toc-number">1.1.7.</span> <span class="toc-text"> Incoherent Identity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#leaks-metadata"><span class="toc-number">1.1.8.</span> <span class="toc-text"> Leaks Metadata</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#no-forward-secrecy"><span class="toc-number">1.1.9.</span> <span class="toc-text"> No Forward Secrecy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#clumsy-keys"><span class="toc-number">1.1.10.</span> <span class="toc-text"> Clumsy Keys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#negotiation"><span class="toc-number">1.1.11.</span> <span class="toc-text"> Negotiation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#janky-code"><span class="toc-number">1.1.12.</span> <span class="toc-text"> Janky Code</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#the-answers"><span class="toc-number">1.2.</span> <span class="toc-text"> The Answers</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#talking-to-people"><span class="toc-number">1.2.1.</span> <span class="toc-text"> Talking To People</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#encrypting-email"><span class="toc-number">1.2.2.</span> <span class="toc-text"> Encrypting Email</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sending-files"><span class="toc-number">1.2.3.</span> <span class="toc-text"> Sending Files</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#encrypting-backups"><span class="toc-number">1.2.4.</span> <span class="toc-text"> Encrypting Backups</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#signing-packages"><span class="toc-number">1.2.5.</span> <span class="toc-text"> Signing Packages</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#encrypting-application-data"><span class="toc-number">1.2.6.</span> <span class="toc-text"> Encrypting Application Data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#encrypting-files"><span class="toc-number">1.2.7.</span> <span class="toc-text"> Encrypting Files</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/2023/04/24/privacy/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84UEFI%E4%BF%A1%E4%BB%BB%E9%93%BE/" rel="bookmark" title="从零开始构建自己的UEFI信任链">从零开始构建自己的UEFI信任链</a></li><li><a href="/2023/05/25/privacy/%E9%9A%90%E7%A7%81%E4%BF%9D%E6%8A%A4%E6%8C%87%E5%8D%97%EF%BC%88%E9%95%BF%E6%9C%9F%E7%BF%BB%E8%AF%91%E9%A1%B9%E7%9B%AE%EF%BC%89/" rel="bookmark" title="隐私保护指南（长期翻译项目）">隐私保护指南（长期翻译项目）</a></li><li><a href="/2023/06/09/privacy/PGP%E7%9A%84%E9%97%AE%E9%A2%98/" rel="bookmark" title="PGP的问题">PGP的问题</a></li><li class="active"><a href="/2023/06/09/privacy/the-pgp-problem/" rel="bookmark" title="the-pgp-problem">the-pgp-problem</a></li><li><a href="/2024/03/14/privacy/Canokey%E4%B8%8D%E5%AE%8C%E5%85%A8%E9%A3%9F%E7%94%A8%E6%8C%87%E5%8D%97-%E6%8C%81%E7%BB%AD%E8%B8%A9%E5%9D%91%E4%B8%AD/" rel="bookmark" title="Canokey不完全食用指南--持续踩坑中">Canokey不完全食用指南--持续踩坑中</a></li><li><a href="/2024/03/21/privacy/%E6%9F%90%E7%A7%91%E5%AD%A6%E7%9A%84PGP%E7%AE%97%E5%8F%B7%E6%8C%87%E5%8D%97/" rel="bookmark" title="某科学的PGP算号指南">某科学的PGP算号指南</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="AUVeggry" src="/assets/avatar.avif"><p class="name" itemprop="name">AUVeggry</p><div class="description" itemprop="description">The spirit of independence and the freedom of thought </div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">64</span><span class="name">posts</span></a></div><div class="item categories"><a href="/categories/"><span class="count">6</span><span class="name">categories</span></a></div><div class="item tags"><a href="/tags/"><span class="count">21</span><span class="name">tags</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/auveggry" class="item github" title="https://github.com/auveggry"><i class="ic i-github"></i></a><a href="mailto:mail@sakurame.eu.org" class="item email" title="mailto:mail@sakurame.eu.org"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>Home</a></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-user"></i>About</a><ul class="submenu"><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>About This Site</a></li><li class="item"><a href="/admiration/" rel="section"><i class="ic i-coffee"></i>Appreciation</a></li><li class="item"><a href="/privacy/" rel="section"><i class="ic i-user"></i>Privacy Policy</a></li></ul></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-feather"></i>Posts</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-sakura"></i>Friends</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/06/09/vcbstudio/%E7%86%9F%E6%82%89VapourSynth/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/06/09/privacy/PGP%E7%9A%84%E9%97%AE%E9%A2%98/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div><div id="player"></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/thinking/" title="In思考随笔记录">思考随笔记录</a></div><span><a href="/2022/05/01/thinking/%E4%B8%80%E7%A7%8D%E5%B9%B3%E5%B8%B8%E7%9A%84%E7%94%9F%E6%B4%BB%E6%80%81%E5%BA%A6/">一种平常的生活态度</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vcbstudio/" title="In视频压制技术">视频压制技术</a></div><span><a href="/2024/03/16/vcbstudio/%E7%AC%AC%E4%B8%89%E7%AB%A0%E7%A5%9E%E4%B8%80%E6%A0%B7%E7%9A%84%E5%B7%A5%E5%85%B7%E4%BB%AC/">第三章神一样的工具们</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/game-engine/" title="In游戏引擎实践">游戏引擎实践</a></div><span><a href="/2023/06/26/game-engine/games104%E7%B3%BB%E5%88%97%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%EF%BC%89/">games104系列笔记（十）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/game-engine/" title="In游戏引擎实践">游戏引擎实践</a></div><span><a href="/2023/06/28/game-engine/games104%E7%B3%BB%E5%88%97%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%BA%94%EF%BC%89/">games104系列笔记（十五）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/game-engine/" title="In游戏引擎实践">游戏引擎实践</a></div><span><a href="/2023/06/24/game-engine/games104%E7%AC%94%E8%AE%B0/">games104笔记</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/game-engine/" title="In游戏引擎实践">游戏引擎实践</a></div><span><a href="/2023/06/25/game-engine/games104%E7%B3%BB%E5%88%97%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/">games104系列笔记（四）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-graphic/" title="In计算机图形学">计算机图形学</a></div><span><a href="/2023/06/24/computer-graphic/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E7%B2%BE%E7%B2%B9%E7%AC%94%E8%AE%B0/">光线追踪精粹笔记</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/thinking/" title="In思考随笔记录">思考随笔记录</a></div><span><a href="/2024/06/03/thinking/%E8%87%B4%E6%95%AC%E6%9D%BF%E7%A0%96%E7%BE%8E%E5%AD%A6/">致敬板砖美学之长寿板砖蓝天P775DM2笔记本电脑评测(转载自Bob's Coding Lab)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/game-engine/" title="In游戏引擎实践">游戏引擎实践</a></div><span><a href="/2023/06/28/game-engine/games104%E7%B3%BB%E5%88%97%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89/">games104系列笔记（十一）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/basic-theory/" title="In计算机基础理论">计算机基础理论</a></div><span><a href="/2024/03/29/computer-graphic/PBRT%E7%AC%AC%E5%9B%9B%E7%89%88%E4%B8%AA%E4%BA%BA%E7%B2%BE%E6%A0%A1%E7%89%88%E7%BF%BB%E8%AF%91%EF%BC%88%E9%95%BF%E6%9C%9F%E8%AE%A1%E5%88%92%E9%A1%B9%E7%9B%AE%EF%BC%89/">PBRT第四版个人精校版翻译（长期计划项目）</a></span></li></ul></div><div class="rpost pjax"><h2>Recent Comments</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">© 2023 -<span itemprop="copyrightYear">2025</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">AUVeggry @ Sakura's Blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="Symbols count total">1.1m words</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="Reading time total">17:13</span></div><div class="powered-by">Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> &amp; Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div><br><span style="display:inline;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:var(--grey-5);"><a target="_blank" rel="noopener" href="https://icp.gov.moe/?keyword=20233555">萌ICP备20233555号</a></span></div></div></footer></div><script data-config="" type="text/javascript">var LOCAL = {
    ispost: true,
    path: `2023/06/09/privacy/the-pgp-problem/`,
    favicon: {
        show: `(●´3｀●) Here we go again.`,
        hide: `(´Д｀) It's a disaster!`
    },
    search: {
        placeholder: "Search for Posts",
        empty: "We didn't find any results for the search: ${query}",
        stats: "${hits} results found in ${time} ms"
    },
    nocopy: "false",
    copyright: `Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.`,
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">Article Timeliness Alert</span><br>This is an article published {{publish}} days ago and last updated {{updated}} days ago. Some information may have changed, so please be careful to screen it.</p></div>`,
    quiz: {
        choice: `Multiple Choice`,
        multiple: `Multiple Answer`,
        true_false: `True/False`,
        essay: `Questions`,
        gap_fill: `Gap Filling`,
        mistake: `Wrong Answer`
    }
};
</script><script src="/js/siteInit.js?v=0.5.4" type="module" fetchpriority="high" defer=""></script></body></html>